<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Khoa&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Khoa&#39;s blog">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;index.html">
<meta property="og:site_name" content="Khoa&#39;s blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Khoa&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Khoa&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-SSHKienthuccobanvaungdung" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/21/SSHKienthuccobanvaungdung/" class="article-date">
  <time datetime="2019-12-20T23:43:17.594Z" itemprop="datePublished">2019-12-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/IT/">IT</a>â–º<a class="article-category-link" href="/categories/IT/DevOps/">DevOps</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/21/SSHKienthuccobanvaungdung/">SSH - Kiáº¿n thá»©c cÄƒn báº£n vÃ  á»©ng dá»¥ng</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Muc-dich-bai-viet"><a href="#Muc-dich-bai-viet" class="headerlink" title="Má»¥c Ä‘Ã­ch bÃ i viáº¿t"></a>Má»¥c Ä‘Ã­ch bÃ i viáº¿t</h2><p>Trong quÃ¡ trÃ¬nh Ä‘i lÃ m cá»§a mÃ¬nh, ngoÃ i viá»‡c viáº¿t code, má»™t hoáº¡t Ä‘á»™ng khÃ¡c chiáº¿m khÃ¡ nhiá»u thá»i gian lÃ  viá»‡c Ä‘áº©y code lÃªn remote repository, hay deploy code lÃªn server. Khi lÃ m viá»‡c vá»›i git hay server, chÃºng ta khÃ´ng thá»ƒ khÃ´ng nháº¯c tá»›i thuáº­t ngá»¯ <strong>SSH</strong>. BÃ i viáº¿t nÃ y cá»§a mÃ¬nh nháº±m má»¥c Ä‘Ã­ch há»‡ thá»‘ng láº¡i cÃ¡c kiáº¿n thá»©c liÃªn quan Ä‘áº¿n SSH, tá»« pháº§n kiáº¿n thá»©c ná»n táº£ng, tá»›i cÃ¡c viá»‡c sá»­ dá»¥ng SSH trong thá»±c táº¿.</p>
<h2 id="Gioi-thieu-SSH"><a href="#Gioi-thieu-SSH" class="headerlink" title="Giá»›i thiá»‡u SSH"></a>Giá»›i thiá»‡u SSH</h2><p>Khi lÃ m viá»‡c vá»›i server, ta cáº§n má»™t phÆ°Æ¡ng thá»©c cho phÃ©p ta káº¿t ná»‘i vá»›i server tá»« mÃ¡y tÃ­nh cá»§a mÃ¬nh. SSH lÃ  má»™t trong nhá»¯ng phÆ°Æ¡ng thá»©c Ä‘Ã³.</p>
<p><img src="/images/SSHkienthuccobanvaungdung/SSH.png" alt="HÃ¬nh 1. Giao thá»©c SSH"></p>
<blockquote>
<p>SSH lÃ  phÆ°Æ¡ng thá»©c giÃºp chÃºng ta thiáº¿t láº­p má»™t <strong>káº¿t ná»‘i báº£o máº­t tá»›i server tá»« xa.</strong> </p>
</blockquote>
<p>Káº¿t ná»‘i nÃ y cho phÃ©p báº¡n lÃ m viá»‡c trá»±c tiáº¿p vá»›i shell cá»§a server. Tá»« Ä‘Ã³ báº¡n cÃ³ thá»ƒ lÃ m viá»‡c vá»›i server giá»‘ng nhÆ° Ä‘ang lÃ m vá»›i mÃ¡y cá»§a mÃ¬nh.</p>
<p>Váº­y lÃ  xong pháº§n Ä‘á»‹nh nghÄ©a. BÃ¢y giá» mÃ¬nh xin phÃ©p Ä‘iá»ƒm láº¡i má»™t sá»‘ kiáº¿n thá»©c cÆ¡ báº£n trÆ°á»›c khi báº¯t Ä‘áº§u thá»±c hÃ nh sá»­ dá»¥ng cÃ´ng cá»¥ nÃ y. Pháº§n nÃ y sáº½ giÃºp chÃºng ta hiá»ƒu rÃµ Ã½ nghÄ©a cá»§a má»™t file config hay má»™t thÃ´ng bÃ¡o lá»—iâ€¦ tá»« Ä‘Ã³ biáº¿t/hiá»ƒu mÃ¬nh cáº§n pháº£i lÃ m gÃ¬ ngay cáº£ khi copy code trÃªn máº¡ng.</p>
<h2 id="Kien-thuc-nen-Ma-hoa"><a href="#Kien-thuc-nen-Ma-hoa" class="headerlink" title="Kiáº¿n thá»©c ná»n : MÃ£ hÃ³a"></a>Kiáº¿n thá»©c ná»n : MÃ£ hÃ³a</h2><p>á» pháº§n trÃªn, chÃºng ta Ä‘Ã£ nháº¯c Ä‘áº¿n <strong>báº£o máº­t</strong>. SSH cho phÃ©p ta thiáº¿t láº­p má»™t káº¿t ná»‘i báº£o máº­t. Äá»ƒ thá»±c hiá»‡n Ä‘iá»u Ä‘Ã³, SSH sá»­ dá»¥ng cÃ¡c thuáº­t toÃ¡n mÃ£ hÃ³a khÃ¡c nhau. Trong pháº§n nÃ y mÃ¬nh xin nháº¯c láº¡i cÃ¡c khÃ¡i niá»‡m mÃ£ hÃ³a, mÃ£ hÃ³a Ä‘á»‘i xá»©ng, mÃ£ hÃ³a phi Ä‘á»‘i xá»©ng.</p>
<h3 id="Ma-hoa"><a href="#Ma-hoa" class="headerlink" title="MÃ£ hÃ³a"></a>MÃ£ hÃ³a</h3><blockquote>
<p>MÃ£ hÃ³a lÃ  viá»‡c diá»…n Ä‘áº¡t má»™t thÃ´ng tin theo dáº¡ng khÃ´ng thá»ƒ hiá»ƒu Ä‘Æ°á»£c trá»« khi báº¡n cÃ³ phÆ°Æ¡ng tiá»‡n Ä‘á»ƒ giáº£i mÃ£.</p>
</blockquote>
<p>MÃ£ hÃ³a Ä‘áº£m báº£o sá»± an toÃ n, báº£o máº­t cho viá»‡c trao Ä‘á»•i thÃ´ng tin giá»¯a 2 bÃªn. CÃ¡c thuáº­t toÃ¡n mÃ£ hÃ³a cÃ³ thá»ƒ Ä‘Æ°á»£c chia ra thÃ nh 2 lá»›p : mÃ£ hÃ³a Ä‘á»‘i xá»©ng vÃ  mÃ£ hÃ³a phi Ä‘á»‘i xá»©ng.</p>
<h3 id="Ma-hoa-doi-xung"><a href="#Ma-hoa-doi-xung" class="headerlink" title="MÃ£ hÃ³a Ä‘á»‘i xá»©ng"></a>MÃ£ hÃ³a Ä‘á»‘i xá»©ng</h3><p>MÃ£ hÃ³a Ä‘á»‘i xá»©ng lÃ  má»™t lá»›p cÃ¡c thuáº­t toÃ¡n mÃ£ hÃ³a mÃ  trong Ä‘Ã³ <strong>viá»‡c mÃ£ hÃ³a vÃ  giáº£i mÃ£ thÃ´ng tin chung má»™t khÃ³a</strong> (giáº£i mÃ£ lÃ  quÃ¡ trÃ¬nh ngÆ°á»£c láº¡i cá»§a mÃ£ hÃ³a). KhÃ³a nÃ y cáº§n Ä‘Æ°á»£c báº£o vá»‡.</p>
<p>MÃ£ hÃ³a Ä‘á»‘i xá»©ng giÃºp cho <strong>thÃ´ng tin Ä‘Æ°á»£c trao Ä‘á»•i Ä‘Æ°á»£c giá»¯ bÃ­ máº­t</strong>. Chá»‰ nhá»¯ng ngÆ°á»i cÃ³ khÃ³a má»›i cÃ³ thá»ƒ giáº£i mÃ£ thÃ´ng tin. </p>
<h3 id="Ma-hoa-phi-doi-xung"><a href="#Ma-hoa-phi-doi-xung" class="headerlink" title="MÃ£ hÃ³a phi Ä‘á»‘i xá»©ng"></a>MÃ£ hÃ³a phi Ä‘á»‘i xá»©ng</h3><p>TrÃ¡i ngÆ°á»£c vá»›i mÃ£ hÃ³a Ä‘á»‘i xá»©ng, cÃ¡c thuáº­t toÃ¡n mÃ£ hÃ³a phi Ä‘á»‘i xá»©ng <strong>sá»­ dá»¥ng 2 khÃ³a khÃ¡c nhau Ä‘á»ƒ mÃ£ hÃ³a vÃ  giáº£i mÃ£ thÃ´ng tin.</strong> Má»—i ngÆ°á»i cáº§n cÃ³ má»™t cáº·p khÃ³a. Trong Ä‘Ã³, khÃ³a cÃ´ng khai cÃ³ thá»ƒ cÃ´ng khai cho má»i ngÆ°á»i, cÃ²n  khÃ³a bÃ­ máº­t thÃ¬ cá»§a riÃªng má»—i ngÆ°á»i vÃ  khÃ´ng Ä‘Æ°á»£c chia sáº» cho báº¥t cá»© ai. Khi thÃ´ng tin Ä‘Æ°á»£c mÃ£ hÃ³a báº±ng má»™t khÃ³a nÃ o Ä‘Ã³ trong cáº·p khÃ³a thÃ¬ chá»‰ cÃ³ duy nháº¥t khÃ³a cÃ²n láº¡i trong cÃ¹ng má»™t cáº·p má»›i cÃ³ thá»ƒ giáº£i mÃ£. </p>
<p>MÃ£ hÃ³a phi Ä‘á»‘i xá»©ng cÅ©ng cung cáº¥p cho chÃºng ta kháº£ nÄƒng báº£o máº­t thÃ´ng tin  giá»‘ng nhÆ° mÃ£ hÃ³a Ä‘á»‘i xá»©ng. Náº¿u bÃªn A mÃ£ hÃ³a tin nháº¯n báº±ng khÃ³a cÃ´ng khai cá»§a bÃªn B thÃ¬ chá»‰ cÃ³ duy nháº¥t bÃªn B vá»›i khÃ³a bÃ­ máº­t cá»§a mÃ¬nh má»›i cÃ³ thá»ƒ giáº£i mÃ£.</p>
<p>NgoÃ i ra, nÃ³ cÃ²n 2 kháº£ nÄƒng sau mÃ  mÃ£ hÃ³a Ä‘á»‘i xá»©ng khÃ´ng cÃ³ : </p>
<ul>
<li>GiÃºp ta xÃ¡c nháº­n ai lÃ  ngÆ°á»i gá»Ÿi thÃ´ng tin. (*)</li>
<li>NgÆ°á»i Ä‘Ã£ gá»Ÿi thÃ´ng tin khÃ´ng thá»ƒ chá»‘i bá» hÃ nh Ä‘á»™ng cá»§a mÃ¬nh</li>
</ul>
<p>ÄÃ¢y lÃ  trÆ°á»ng há»£p khi bÃªn A mÃ£ hÃ³a tin nháº¯n báº±ng khÃ³a bÃ­ máº­t cá»§a chÃ­nh mÃ¬nh. BÃªn B dÃ¹ng khÃ³a cÃ´ng khai cá»§a bÃªn A Ä‘á»ƒ giáº£i mÃ£. Náº¿u giáº£i mÃ£ thÃ nh cÃ´ng chá»©ng tá» tin nháº¯n chá»‰ cÃ³ thá»ƒ Ä‘Æ°á»£c gá»Ÿi Ä‘i tá»« bÃªn A. Äá»“ng thá»i, bÃªn A cÅ©ng khÃ´ng thá»ƒ chá»‘i bá» ráº±ng mÃ¬nh Ä‘Ã£ gá»Ÿi tin nháº¯n nÃ y vÃ¬ náº¿u lÃ  má»™t ai khÃ¡c gá»Ÿi thÃ¬ bÃªn B khÃ´ng thá»ƒ dÃ¹ng khÃ³a cÃ´ng khai cá»§a bÃªn A Ä‘á»ƒ giáº£i mÃ£.</p>
<p><img src="/images/SSHkienthuccobanvaungdung/AsymetricEncryptionForAuthentication-Success.png" alt="HÃ¬nh 2. TrÆ°á»ng há»£p giáº£i mÃ£ thÃ nh cÃ´ng"></p>
<p><img src="/images/SSHkienthuccobanvaungdung/AsymetricEncryptionForAuthentication-Fail.png" alt="HÃ¬nh 3. TrÆ°á»ng há»£p giáº£i mÃ£ tháº¥t báº¡i"></p>
<p>TÃ­nh cháº¥t (*) lÃ  má»™t cÆ¡ sá»Ÿ quan trá»ng cho SSH, vÃ¬ nÃ³ giÃºp server <strong>xÃ¡c thá»±c</strong> ai lÃ  ngÆ°á»i Ä‘ang káº¿t ná»‘i vá»›i há»‡ thá»‘ng. Äiá»u nÃ y cho phÃ©p server cÃ³ thá»ƒ cháº¥p nháº­n hoáº·c tá»« chá»‘i káº¿t ná»‘i. QuÃ¡ trÃ¬nh xÃ¡c thá»±c sá»­ dá»¥ng SSH khÃ´ng yÃªu cáº§u máº­t kháº©u, thay vÃ o Ä‘Ã³ khÃ³a bÃ­ máº­t sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng cÃ¹ng vá»›i cÃ¡c khÃ³a cÃ´ng khai Ä‘Æ°á»£c cho phÃ©p (authorized_keys) trÃªn server. So sÃ¡nh 2 phÆ°Æ¡ng phÃ¡p xÃ¡c thá»±c báº±ng máº­t kháº©u vÃ  báº±ng khÃ³a bÃ­ máº­t, ta tháº¥y ráº±ng : </p>
<ul>
<li>XÃ¡c thá»±c báº±ng khÃ³a bÃ­ máº­t cho phÃ©p ta <strong>tá»± Ä‘á»™ng hÃ³a</strong> cÃ¡c cÃ¢u lá»‡nh vÃ¬ server shell khÃ´ng yÃªu cáº§u nháº­p máº­t kháº©u.</li>
<li>XÃ¡c thá»±c báº±ng khÃ³a bÃ­ máº­t cho ta biáº¿t <strong>ai</strong> lÃ  ngÆ°á»i truy cáº­p há»‡ thá»‘ng. Vá»›i máº­t kháº©u, ngÆ°á»i Ä‘Äƒng nháº­p vÃ o há»‡ thá»‘ng chá»‰ lÃ  má»™t ngÆ°á»i nÃ o Ä‘Ã³ biáº¿t máº­t kháº©u.</li>
<li>Vá»›i viá»‡c khÃ´ng sá»­ dá»¥ng máº­t kháº©u, xÃ¡c thá»±c báº±ng khÃ³a bÃ­ máº­t <strong>an toÃ n</strong> hÆ¡n. Má»—i ngÆ°á»i trong má»™t nhÃ³m cÃ³ thá»ƒ dÃ¹ng khÃ³a bÃ­ máº­t cá»§a riÃªng mÃ¬nh Ä‘á»ƒ Ä‘Äƒng nháº­p vÃ o há»‡ thá»‘ng chung thay vÃ¬ chia sáº» vá»›i nhau má»™t máº­t kháº©u.</li>
</ul>
<p>ÄÃ³ cÅ©ng chÃ­nh lÃ  nhá»¯ng Ä‘iá»ƒm máº¡nh cá»§a SSH. BÃ¢y giá», chÃºng ta sáº½ nÃ³i vá» viá»‡c sá»­ dá»¥ng SSH trong thá»±c táº¿.</p>
<h2 id="Su-dung-SSH-khi-di-lam"><a href="#Su-dung-SSH-khi-di-lam" class="headerlink" title="Sá»­ dá»¥ng SSH khi Ä‘i lÃ m"></a>Sá»­ dá»¥ng SSH khi Ä‘i lÃ m</h2><h3 id="Su-dung-SSH-voi-Git-hosting-service"><a href="#Su-dung-SSH-voi-Git-hosting-service" class="headerlink" title="Sá»­ dá»¥ng SSH vá»›i Git hosting service"></a>Sá»­ dá»¥ng SSH vá»›i Git hosting service</h3><p>Khi lÃ m viá»‡c vá»›i git hosting service nhÆ° GitHub, chÃºng ta cÃ³ thá»ƒ clone, push, pull.. má»™t repository sá»­ dá»¥ng giao thá»©c HTTPS hoáº·c SSH. </p>
<ul>
<li>Náº¿u sá»­ dá»¥ng HTTPS, má»—i khi push, pull .. chÃºng ta cáº§n pháº£i nháº­p tÃ i khoáº£n vÃ  máº­t kháº©u GitHub.</li>
<li>Náº¿u sá»­ dá»¥ng SSH, chÃºng ta cáº§n pháº£i cung cáº¥p cho GitHub khÃ³a cÃ´ng khai cá»§a mÃ¬nh (trong má»¥c Settings &gt; SSH and GPG keys). Sau Ä‘Ã³, má»—i khi push, pullâ€¦ thay vÃ¬ pháº£i nháº­p tÃ i khoáº£n vÃ  máº­t kháº©u GitHub, chÃºng ta chá»‰ cáº§n nháº­p máº­t kháº©u cá»§a khÃ³a bÃ­ máº­t (passphrase), hoáº·c khÃ´ng cáº§n pháº£i gÃµ thÃªm gÃ¬ náº¿u báº¡n khÃ´ng setup passphrase khi táº¡o khÃ³a. GitHub sá»­ dá»¥ng khÃ³a cÃ´ng khai Ä‘á»ƒ xÃ¡c thá»±c xem ta lÃ  ai vÃ  cÃ³ quyá»n Ä‘á»c/ghi repository hay khÃ´ng vÃ  cháº¥p nháº­n hoáº·c tá»« chá»‘i cÃ¢u lá»‡nh cá»§a chÃºng ta.</li>
</ul>
<p>RÃµ rÃ ng cÃ¡ch 2 tiá»‡n hÆ¡n vÃ¬ chÃºng ta Ä‘á»¡ pháº£i nháº­p dá»¯ liá»‡u. Trong trÆ°á»ng há»£p khÃ´ng cÃ³ passphrase, quÃ¡ trÃ¬nh push/pull repository cÃ³ thá»ƒ Ä‘Æ°á»£c hoÃ n thÃ nh báº±ng viá»‡c cháº¡y script. Äiá»u nÃ y cho phÃ©p ta tá»± Ä‘á»™ng hÃ³a viá»‡c deploy code lÃªn server.</p>
<h3 id="Cau-hinh-SSH"><a href="#Cau-hinh-SSH" class="headerlink" title="Cáº¥u hÃ¬nh SSH"></a>Cáº¥u hÃ¬nh SSH</h3><p>Äá»ƒ cáº¥u hÃ¬nh SSH, chÃºng ta sáº½ lÃ m viá»‡c vá»›i thÆ° má»¥c .ssh. ÄÃ¢y lÃ  thÆ° má»¥c chá»©a cÃ¡c file quan trá»ng Ä‘á»ƒ sá»­ dá»¥ng giao thá»©c SSH : authorized_keys, known_hosts vÃ  config. DÆ°á»›i Ä‘Ã¢y mÃ¬nh xin giáº£i thÃ­ch Ã½ nghÄ©a cá»§a tá»«ng file : </p>
<ul>
<li><p><strong>authorized_keys</strong> : trong file nÃ y chá»©a danh sÃ¡ch cÃ¡c khÃ³a cÃ´ng khai cá»§a nhá»¯ng ngÆ°á»i cÃ³ thá»ƒ truy cáº­p vÃ o há»‡ thá»‘ng.<br>Khi má»™t ngÆ°á»i káº¿t ná»‘i tá»›i server, tin nháº¯n Ä‘Æ°á»£c mÃ£ hÃ³a bá»Ÿi khÃ³a bÃ­ máº­t cá»§a há» sáº½ Ä‘Æ°á»£c giáº£i mÃ£ bá»Ÿi láº§n lÆ°á»£t cÃ¡c khÃ³a cÃ´ng khai trong authorized_keys. Náº¿u má»™t trong sá»‘ cÃ¡c khÃ³a cÃ´ng khai nÃ y cÃ³ thá»ƒ giáº£i mÃ£ thÃ nh cÃ´ng thÃ¬ ngÆ°á»i Ä‘Ã³ sáº½ Ä‘Æ°á»£c cho phÃ©p káº¿t ná»‘i vÃ o server.</p>
<p>  Váº­y, náº¿u báº¡n muá»‘n truy cáº­p vÃ o user <code>user</code> cá»§a server <code>server</code> sá»­ dá»¥ng giao thá»©c SSH, báº¡n chá»‰ cáº§n thÃªm khÃ³a cÃ´ng khai cá»§a mÃ¬nh vÃ o file authorized_keys trong thÆ° má»¥c .ssh cá»§a user <code>user</code>. Äiá»u nÃ y vá» máº·t báº£n cháº¥t cÅ©ng giá»‘ng nhÆ° khi báº¡n thÃªm khÃ³a cÃ´ng khai vÃ o tÃ i khoáº£n GitHub cá»§a mÃ¬nh.</p>
</li>
<li><p><strong>known_hosts</strong> : trong file nÃ y chá»©a danh sÃ¡ch cÃ¡c host báº¡n Ä‘Ã£ truy cáº­p. CÃ¡c thÃ´ng tin trong file giÃºp mÃ¡y tÃ­nh kiá»ƒm tra danh tÃ­nh host mÃ  nÃ³ Ä‘ang káº¿t ná»‘i Ä‘á»ƒ cháº¯c cháº¯n ráº±ng nÃ³ Ä‘ang káº¿t ná»‘i tá»›i Ä‘Ãºng nÆ¡i, trÃ¡nh viá»‡c bá»‹ káº» xáº¥u redirect káº¿t ná»‘i vÃ o mÃ¡y cá»§a há».</p>
</li>
<li><p><strong>config</strong> : file nÃ y chá»©a cÃ¡c thiáº¿t láº­p SSH. Khi chÃºng ta sá»­ dá»¥ng má»™t káº¿t ná»‘i SSH thÆ°á»ng xuyÃªn, chÃºng ta cÃ³ thá»ƒ lÆ°u cÃ¡c tham sá»‘ cá»§a káº¿t ná»‘i Ä‘Ã³ vÃ o file nÃ y. CÃ¢u lá»‡nh SSH sáº½ Ä‘Æ°á»£c rÃºt ngáº¯n hÆ¡n.<br>VÃ­ dá»¥, khi báº¡n lÆ°u Ä‘oáº¡n text dÆ°á»›i Ä‘Ã¢y vÃ o file ~/.ssh/config</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host alias</span><br><span class="line">    HostName hostname</span><br><span class="line">    User username</span><br><span class="line">    IdentityFile ~/.ssh/private_key</span><br></pre></td></tr></table></figure>
<p>ThÃ¬ cÃ¢u lá»‡nh <code>ssh alias</code> sáº½ tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i <code>ssh username@hostname -i ~/.ssh/private_key</code></p>
</li>
</ul>
<p>MÃ¬nh sá»­ dá»¥ng file config nÃ y khi cáº§n pháº£i thiáº¿t láº­p má»™t tÃ i khoáº£n GitLab thá»© 2. CÃ¡c báº¡n cÃ³ thá»ƒ xem chi tiáº¿t táº¡i <a href="https://medium.com/uncaught-exception/setting-up-multiple-gitlab-accounts-82b70e88c437" target="_blank" rel="noopener">Ä‘Ã¢y</a>.</p>
<h3 id="Mot-vi-du-ve-viec-van-dung-ly-thuyet-de-giai-quyet-loi"><a href="#Mot-vi-du-ve-viec-van-dung-ly-thuyet-de-giai-quyet-loi" class="headerlink" title="Má»™t vÃ­ dá»¥ vá» viá»‡c váº­n dá»¥ng lÃ½ thuyáº¿t Ä‘á»ƒ giáº£i quyáº¿t lá»—i"></a>Má»™t vÃ­ dá»¥ vá» viá»‡c váº­n dá»¥ng lÃ½ thuyáº¿t Ä‘á»ƒ giáº£i quyáº¿t lá»—i</h3><p>Trong pháº§n nÃ y, mÃ¬nh xin giá»›i thiá»‡u má»™t lá»—i hay gáº·p khi lÃ m viá»‡c vá»›i SSH vÃ  cÃ¡ch giáº£i quyáº¿t. Báº¡n sáº½ tháº¥y pháº§n kiáº¿n thá»©c cÆ¡ báº£n cÃ³ Ã­ch cho chÃºng ta nhÆ° tháº¿ nÃ o.</p>
<p>Báº¡n cÃ³ tháº¥y cÃ¡i thÃ´ng bÃ¡o nÃ y quen quen khÃ´ng ?</p>
<p><img src="/images/SSHkienthuccobanvaungdung/keyopen.PNG" alt="HÃ¬nh 4. KhÃ³a bÃ­ máº­t khÃ´ng Ä‘Æ°á»£c báº£o vá»‡"></p>
<p>ÄÃ¢y lÃ  lá»—i hay gáº·p khi chÃºng ta copy khÃ³a bÃ­ máº­t tá»« mÃ¡y nÃ y sang mÃ¡y khÃ¡c sau Ä‘Ã³ sá»­ dá»¥ng SSH ngay. NhÆ° trong pháº§n lÃ½ thuyáº¿t mÃ¬nh Ä‘Ã£ Ä‘á» cáº­p, khÃ³a bÃ­ máº­t lÃ  cá»§a riÃªng má»—i ngÆ°á»i vÃ  khÃ´ng Ä‘Æ°á»£c chia sáº» cho báº¥t ká»³ ai. Trong hÃ¬nh, khÃ³a cÃ³ permission lÃ  644, cÃ³ nghÄ©a lÃ  má»i ngÆ°á»i cÃ³ thá»ƒ Ä‘á»c Ä‘Æ°á»£c ná»™i dung cá»§a khÃ³a, vi pháº¡m nguyÃªn táº¯c cá»§a khÃ³a bÃ­ máº­t dáº«n Ä‘áº¿n lá»—i.</p>
<p>Váº¥n Ä‘á» Ä‘Ã£ rÃµ, ta cáº§n giá»›i háº¡n permission cá»§a khÃ³a. Ta cÃ³ thá»ƒ cÃ¢n nháº¯c giá»¯a 400 hoáº·c 600. Xong !</p>
<h2 id="Tong-ket"><a href="#Tong-ket" class="headerlink" title="Tá»•ng káº¿t"></a>Tá»•ng káº¿t</h2><p>SSH lÃ  má»™t cÃ´ng cá»¥ mÃ  mÃ¬nh sá»­ dá»¥ng khÃ¡ thÆ°á»ng xuyÃªn trong cÃ´ng viá»‡c. LÃºc ban Ä‘áº§u mÃ¬nh cÅ©ng lÃªn máº¡ng copy nhá»¯ng Ä‘oáº¡n lá»‡nh vá» dÃ¡n vÃ o terminal Ä‘á»ƒ cháº¡y nhÆ°ng mÃ¬nh khÃ´ng náº¯m rÃµ báº£n cháº¥t. Khi pháº£i cáº¥u hÃ¬nh nhá»¯ng trÆ°á»ng há»£p phá»©c táº¡p hÆ¡n hay gáº§n Ä‘Ã¢y lÃ m viá»‡c vá»›i GitLab CI/CD thÃ¬ mÃ¬nh ráº¥t lÃºng tÃºng. Sau khi há»‡ thá»‘ng láº¡i, mÃ¬nh dá»… dÃ ng nhÃ¬n ra má»‘i liÃªn há»‡ cháº·t cháº½ giá»¯a kiáº¿n thá»©c cÆ¡ báº£n vÃ  á»©ng dá»¥ng trong thá»±c táº¿. Hiá»ƒu rÃµ Ä‘Æ°á»£c Ä‘iá»u nÃ y giÃºp mÃ¬nh tá»± tin hÆ¡n khi lÃ m viá»‡c. Hi vá»ng bÃ i viáº¿t nÃ y cÃ³ Ã­ch vá»›i báº¡n Ä‘á»c. Háº¹n gáº·p láº¡i !</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/12/21/SSHKienthuccobanvaungdung/" data-id="ck4llw8yt0001pcuq6xva45sz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CI-CD/" rel="tag">CI/CD</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSH/" rel="tag">SSH</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2namnodejs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/03/2namnodejs/" class="article-date">
  <time datetime="2019-11-03T10:35:01.716Z" itemprop="datePublished">2019-11-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/IT/">IT</a>â–º<a class="article-category-link" href="/categories/IT/Backend/">Backend</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/03/2namnodejs/">TÃ³m táº¯t 2 nÄƒm sá»­ dá»¥ng NodeJS</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Giai-doan-1-Tiep-can"><a href="#Giai-doan-1-Tiep-can" class="headerlink" title="Giai Ä‘oáº¡n 1 : Tiáº¿p cáº­n."></a>Giai Ä‘oáº¡n 1 : Tiáº¿p cáº­n.</h2><p>MÃ¬nh báº¯t Ä‘áº§u sá»­ dá»¥ng NodeJS vÃ o há»c ká»³ 1 nÄƒm 5 Ä‘áº¡i há»c. Ná»n táº£ng láº­p trÃ¬nh Web cá»§a mÃ¬nh trÆ°á»›c khi tiáº¿p cáº­n NodeJS : </p>
<ul>
<li>Vá» thá»±c hÃ nh, thá»±c táº­p vá»›i ASP.NET 1 thÃ¡ng rÆ°á»¡i vÃ o cuá»‘i nÄƒm 3. 2 project PHP á»Ÿ trÆ°á»ng Ä‘áº¡i há»c. </li>
<li>Vá» lÃ½ thuyáº¿t, mÃ¬nh náº¯m (sÆ¡ sÆ¡) cÃ¡c khÃ¡i niÃªm cÆ¡ báº£n : client, server, giao thá»©c http. Biáº¿t code HTML, CSS vÃ  JavaScript.</li>
</ul>
<p>Khi tiáº¿p xÃºc vá»›i NodeJS, cáº£m nháº­n Ä‘áº§u tiÃªn cá»§a mÃ¬nh lÃ  nÃ³ dá»… tiáº¿p cáº­n hÆ¡n ASP.NET, thá»±c táº­p nÄƒm 3 cÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng ASP.NET vÃ  tháº¥y nÃ³ hÆ¡i khÃ³ tiáº¿p cáº­n (trÃ¬nh Ä‘á»™ lÃºc Ä‘Ã³ kÃ©m) ngoÃ i ra Visual Studio khÃ¡ náº·ng vÃ  pháº§n cáº¥u hÃ¬nh chá»‰nh chá»‰nh cÃ¡i file xml  thÃ¬ hoÃ n toÃ n khÃ´ng hiá»ƒu gÃ¬.</p>
<p>Má»™t Ä‘iá»ƒm ná»¯a lÃ  Ä‘á»ƒ thá»±c thi chÆ°Æ¡ng trÃ¬nh (webserver) chá»‰ cáº§n gÃµ 1 lá»‡nh â€œnode app.jsâ€ lÃ  nÃ³ tá»± cháº¡y, khÃ´ng cáº§n pháº£i cÃ i Ä‘áº·t server, pháº§n nÃ y lÃ m mÃ¬nh khÃ¡ thÃ­ch vÃ¬ má»—i láº§n Ä‘á»¥ng Ä‘áº¿n cáº¥u hÃ¬nh hay cÃ i Ä‘áº·t má»™t cÃ¡i gÃ¬ Ä‘Ã³ thÃ¬ mÃ¬nh khÃ¡ e ngáº¡i. </p>
<p>Dáº§n dáº§n mÃ¬nh nháº­n ra nhá»¯ng Ä‘iá»ƒm lá»£i khÃ¡c cá»§a NodeJS</p>
<ul>
<li>DÃ¹ng code JS cáº£ frontend vÃ  backend =&gt; khÃ´ng cáº§n pháº£i há»c thÃªm má»™t ngÃ´n ngá»¯ phÃ­a server.</li>
<li>Äá»ƒ viáº¿t 1 app Ä‘Æ¡n giáº£n thÃ¬ ráº¥t nhanh, khÃ´ng cáº§n pháº£i thiáº¿t káº¿ class vá»›i cÃ¡c nguyÃªn táº¯c cá»§a láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng.</li>
<li>NgoÃ i viá»‡c code logic cá»§a á»©ng dá»¥ng, nhá»¯ng pháº§n cÃ²n láº¡i thÃ¬ háº§u háº¿t Ä‘á»u cÃ³ má»™t module trÃªn npm cÃ³ thá»ƒ cÃ i Ä‘áº·t vÃ  sá»­ dá»¥ng ráº¥t dá»… dÃ ng, tá»« quáº£n lÃ½ session, cho phÃ©p request cross domain,â€¦ vÃ  nhiá»u chá»©c nÄƒng khÃ¡c. MÃ¬nh cáº£m tháº¥y ráº¥t tiá»‡n.</li>
</ul>
<p>(Pháº§n nÃ y mÃ¬nh khÃ´ng cÃ³ Ã½ dÃ¬m hÃ ng cÃ¡c cÃ´ng nghá»‡ khÃ¡c, quan Ä‘iá»ƒm cÃ¡ nhÃ¢n lÃ  vá»›i má»™t ngÆ°á»i khÃ´ng cÃ³ nhiá»u kinh nghiá»‡m vá» web thÃ¬ NodeJS khÃ¡ lÃ  dá»… tiáº¿p cáº­n)</p>
<h2 id="Giai-doan-2-Gap-rac-roi"><a href="#Giai-doan-2-Gap-rac-roi" class="headerlink" title="Giai Ä‘oáº¡n 2 : Gáº·p ráº¯c rá»‘i."></a>Giai Ä‘oáº¡n 2 : Gáº·p ráº¯c rá»‘i.</h2><p>Sau khi há»c NodeJS Ä‘Æ°á»£c 1 há»c ká»³, báº¯t Ä‘áº§u Ä‘i thá»±c táº­p vÃ  sá»­ dá»¥ng NodeJS. á» giai Ä‘oáº¡n nÃ y, mÃ¬nh váº«n dÃ¹ng style code Ä‘Æ°á»£c há»c trÃªn trÆ°á»ng Ä‘á»ƒ viáº¿t code.</p>
<p>CÃ´ng ty mÃ¬nh thá»±c táº­p lÃ  1 startup, mÃ¬nh Ä‘Æ°á»£c giao cÃ´ng viá»‡c vÃ  hÆ°á»›ng dáº«n khi gáº·p khÃ³ khÄƒn, má»¥c tiÃªu lÃ  hoÃ n thÃ nh sáº£n pháº©m nhanh chÃ³ng nÃªn khÃ´ng cÃ³ nhiá»u code review. MÃ¬nh code khÃ¡ tá»± do. BÃ¢y giá» nhÃ¬n láº¡i thÃ¬ tháº¥y thiáº¿u sÃ³t cá»§a mÃ¬nh á»Ÿ giai Ä‘oáº¡n nÃ y lÃ  khÃ´ng lÃªn máº¡ng tÃ¬m hiá»ƒu xem ngÆ°á»i ta Ä‘ang sá»­ dá»¥ng NodeJS nhÆ° tháº¿ nÃ o.</p>
<p>Theo thá»i gian, nhá»¯ng chá»©c nÄƒng Ä‘Æ°á»£c thÃªm vÃ o, project ngÃ y cÃ ng lá»›n dáº§n lÃªn. Má»‘i liÃªn há»‡ giá»¯a cÃ¡c thÃ nh pháº§n trong project ngÃ y cÃ ng trá»Ÿ nÃªn rá»‘i ráº¯m hÆ¡n.<br>MÃ¬nh cáº£m tháº¥y project cá»§a mÃ¬nh khÃ´ng cÃ³ má»™t chuáº©n, qui táº¯c nÃ o, vÃ  báº¯t Ä‘áº§u trá»Ÿ nÃªn khÃ³ quáº£n lÃ½ theo thá»i gian. á» má»©c tháº¥p hÆ¡n, code nhÃ¬n xáº¥u vá»›i nhiá»u hÃ m callback lá»“ng nhau. MÃ¬nh báº¯t Ä‘áº§u tÃ¬m hiá»ƒu trÃªn máº¡ng nhá»¯ng â€œbest practicesâ€ cho NodeJS (vÃ  cáº£ nhá»¯ng váº¥n Ä‘á» khÃ¡c liÃªn quan tá»›i viá»‡c viáº¿t API). MÃ¬nh tÃ¬m tháº¥y trang <a href="https://github.com/goldbergyoni/nodebestpractices" target="_blank" rel="noopener">https://github.com/goldbergyoni/nodebestpractices</a> táº­p há»£p ráº¥t nhiá»u nhá»¯ng Â« best practices Â» há»¯u Ã­ch khi lÃ m viá»‡c vá»›i NodeJS. Tá»« cáº¥u trÃºc project, xá»­ lÃ½ lá»—i, cÃ¡ch viáº¿t code,â€¦ táº¥t cáº£ Ä‘á»u Ä‘Æ°á»£c táº­p há»£p trong má»™t link duy nháº¥t, má»™t link duy nháº¥t ğŸ˜Š.</p>
<p>Khi xem cÃ¡c bÃ i viáº¿t trong trang nÃ y, mÃ¬nh tháº¥y code cá»§a mÃ¬nh Ä‘á»¥ng Ä‘áº¿n khÃ¡ nhiá»u nhá»¯ng Ä‘iá»ƒm sai sÃ³t, nhá»¯ng Ä‘iá»ƒm lá»›n mÃ  mÃ¬nh nhá»› lÃ  : </p>
<ul>
<li><strong>Cáº¥u trÃºc project theo lá»›p</strong> : mÃ¬nh chia file theo lá»›p, lá»›p route, lá»›p logic vÃ  lá»›p access database. Tháº­t ra lÃºc ban Ä‘áº§u mÃ¬nh khÃ´ng há» nháº­n ra Ä‘iá»u nÃ y, chá»‰ sau khi project lá»›n dáº§n lÃªn vÃ  mÃ¬nh liÃªn tá»¥c pháº£i kÃ©o chuá»™t lÃªn xuá»‘ng Ä‘á»ƒ tÃ¬m file thÃ¬ tháº¥y ráº¥t báº¥t tiá»‡n</li>
<li><strong>Callback hell</strong> : ban Ä‘áº§u mÃ¬nh sá»­ dá»¥ng callback, Ä‘Ã¢y lÃ  cÃ¡ch mÃ¬nh Ä‘Æ°á»£c há»c trong trÆ°á»ng. LÃºc Ä‘Ã³ mÃ¬nh dÃ¹ng callback thÃ¬ cÅ©ng khÃ´ng cáº£m tháº¥y cÃ³ váº¥n Ä‘á» gÃ¬. Cho Ä‘áº¿n khi project cá»§a mÃ¬nh ngÃ y cÃ ng cÃ³ nhiá»u business phá»©c táº¡p thÃ¬ má»™t hÃ m cá»§a mÃ¬nh chá»©a ráº¥t nhiá»u callback, mÃ  má»—i láº§n callback thÃ¬ code nÃ³ bá»‹ thá»¥t vÃ o trong nÃªn ráº¥t khÃ³ coi. Äá»‰nh Ä‘iá»ƒm mÃ¬nh nhá»› cÃ³ má»™t hÃ m nÃ³ tá»¥t vÃ o gáº§n giá»¯a trang code</li>
</ul>
<p>Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng NodeJS vÃ  lÃ m 2 Ä‘iá»u nÃ y thÃ¬ nÃªn thay Ä‘á»•i ngay, Ä‘á»«ng nhÆ° mÃ¬nh ğŸ˜Š </p>
<p>VÃ  cÃ²n nhiá»u Ä‘iá»ƒm khÃ¡c, ngoÃ i ra project mÃ¬nh cÃ²n cÃ³ nhá»¯ng lá»—i sau, liÃªn quan tá»›i viá»‡c viáº¿t API : </p>
<ul>
<li>Vá» viá»‡c sá»­ dá»¥ng phÆ°Æ¡ng thá»©c http<br>Thá»i gian Ä‘Ã³ project cá»§a mÃ¬nh chá»‰ cÃ³ 2 method : get vÃ  post. Get Ä‘á»ƒ láº¥y thÃ´ng tin tá»« server, Post Ä‘á»ƒ server lÃ m gÃ¬ Ä‘Ã³ vá»›i thÃ´ng tin Ä‘Æ°á»£c post. MÃ¬nh lÃªn máº¡ng tÃ¬m hiá»ƒu cÃ¡c phÆ°Æ¡ng thá»©c cá»§a http, ngoÃ i get vÃ  post cÃ²n cÃ³ put, delete, head, optionâ€¦ Sau Ä‘Ã³ mÃ¬nh nghiÃªn cá»©u vÃ  sá»­ dá»¥ng thÃªm put vÃ  delete. </li>
<li>Vá» viá»‡c Ä‘áº·t tÃªn cho API<br>Thá»i gian Ä‘áº§u Ä‘i lÃ m mÃ¬nh hay Ä‘áº·t tÃªn api dáº¡ng /createuser, /modifyuser, /deleteuser<br>Sau khi tÃ¬m Ä‘á»c vá» cÃ¡ch Ä‘áº·t tÃªn API, mÃ¬nh rÃºt ra má»™t bÃ i há»c lÃ  khÃ´ng nÃªn Ä‘á»ƒ cÃ¡c Ä‘á»™ng tá»« nhÆ° create/modify/delete/get vÃ o trong api, tÃªn phÆ°Æ¡ng thá»©c http sáº½ thá»ƒ hiá»‡n thÃ´ng tin Ä‘Ã³. VÃ­ dá»¥ : </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Get /users/id : get user báº±ng id</span><br><span class="line">Get /users?query: get nhiá»u users, cÃ³ thá»ƒ sá»­ dá»¥ng query</span><br><span class="line">Post /users : táº¡o má»™t user</span><br><span class="line">Put /user : update thÃ´ng tin má»™t user</span><br><span class="line">Delete /user : xÃ³a user</span><br></pre></td></tr></table></figure>
<p>Theo cÃ¡ch nÃ y tÃªn cá»§a cÃ¡c api sáº½ Ä‘Æ¡n giáº£n vÃ  nháº¥t quÃ¡n hÆ¡n.</p>
<h2 id="Giai-doan-3-Cap-nhat-kien-thuc-moi"><a href="#Giai-doan-3-Cap-nhat-kien-thuc-moi" class="headerlink" title="Giai Ä‘oáº¡n 3 : Cáº­p nháº­t kiáº¿n thá»©c má»›i"></a>Giai Ä‘oáº¡n 3 : Cáº­p nháº­t kiáº¿n thá»©c má»›i</h2><p>Láº¡i nÃ³i vá» project NodeJS cá»§a mÃ¬nh, táº¡i thá»i Ä‘iá»ƒm Ä‘á»c Ä‘Æ°á»£c nhá»¯ng best practices thÃ¬ project nÃ y cÅ©ng Ä‘Ã£ tÆ°Æ¡ng Ä‘á»‘i to Ä‘á»ƒ mÃ¬nh cÃ³ thá»ƒ refactor nÃªn mÃ¬nh khÃ´ng refactor code cÅ©. Tuy nhiÃªn mÃ¬nh sáº½ viáº¿t nhá»¯ng code má»›i theo cÃ¡c best practices Ä‘Ã£ Ä‘á»c. TÆ°Æ¡ng á»©ng vá»›i 2 (trong sá»‘ ráº¥t nhiá»u) lá»—i mÃ  mÃ¬nh Ä‘Ã£ pháº¡m á»Ÿ giai Ä‘oáº¡n 2, mÃ¬nh Ã¡p dá»¥ng kiáº¿n thá»©c má»›i.</p>
<ul>
<li><p>Cáº¥u trÃºc project : vá»›i má»™t tÃ­nh nÄƒng má»›i Ä‘Æ°á»£c thÃªm vÃ o project, mÃ¬nh sáº½ táº¡o má»™t thÆ° má»¥c má»›i chá»©a toÃ n bá»™ file liÃªn quan Ä‘áº¿n tÃ­nh nÄƒng Ä‘Ã³ á»Ÿ cÃ¡c táº§ng khÃ¡c nhau. VÃ­ dá»¥, khi thÃªm tÃ­nh nÄƒng quáº£n lÃ½ ngÆ°á»i dÃ¹ng thÃ¬ mÃ¬nh sáº½ táº¡o má»™t thÆ° má»¥c user chá»©a cÃ¡c file : user.service, user.data, user.test, user.route.</p>
</li>
<li><p>Coding style : mÃ¬nh sá»­ dá»¥ng async/await. 2 tá»« khÃ³a nÃ y giÃºp viá»‡c viáº¿t code báº¥t Ä‘á»“ng bá»™ trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n nhiá»u. Code báº¥t Ä‘á»“ng bá»™ sá»­ dá»¥ng 2 tá»« khÃ³a nÃ y trÃ´ng giá»‘ng y nhÆ° má»™t Ä‘oáº¡n code Ä‘á»“ng bá»™ thÃ´ng thÆ°á»ng.</p>
</li>
</ul>
<p>Tá»›i thá»i Ä‘iá»ƒm nÃ y, sau 2 nÄƒm sá»­ dá»¥ng NodeJS, mÃ¬nh thá»±c hiá»‡n má»™t project nho nhá» Ä‘á»ƒ cÃ i Ä‘áº·t táº¥t cáº£ nhá»¯ng best practices mÃ  mÃ¬nh tháº¥y há»¯u dá»¥ng nháº¥t vÃ  sá»­ dá»¥ng nÃ³ nhÆ° má»™t template cho cÃ¡c project NodeJS sau nÃ y cá»§a mÃ¬nh. Nhá»¯ng best practices Ä‘Ã³ lÃ  : </p>
<ol>
<li>Chia project theo chá»©c nÄƒng (nhÆ° mÃ¬nh Ä‘Ã£ nÃ³i á»Ÿ trÃªn). </li>
<li>NgÄƒn cÃ¡ch rÃµ cÃ¡c táº§ng trong project.<br>VÃ­ dá»¥, náº¿u á»Ÿ táº§ng route mÃ¬nh truyá»n tháº³ng 2 biáº¿n req vÃ  res vÃ o táº§ng business thÃ¬ mÃ¬nh Ä‘Ã£ táº¡o ra sá»± phá»¥ thuá»™c cá»§a táº§ng business vÃ o táº§ng route. Äiá»u nÃ y lÃ m cho viá»‡c test code business trá»Ÿ nÃªn khÃ³ khÄƒn. Thay vÃ o Ä‘Ã³, táº¡i táº§ng route, mÃ¬nh chá»‰ lá»±a nhá»¯ng trÆ°á»ng nÃ o cáº§n thiáº¿t Ä‘á»ƒ truyá»n vÃ o, thÆ°Æ¡ng lÃ  cÃ¡c trÆ°á»ng trong req.body hoáº·c lÃ  req.params.<br>Má»™t Ä‘iá»ƒm mÃ  mÃ¬nh hay tháº¥y á»Ÿ cÃ¡c project NodeJS trÃªn Github lÃ , táº¡i táº§ng model, há» sáº½ export ra model Ä‘á»ƒ táº§ng Business sá»­ dá»¥ng. Táº§ng business cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c method find, findOne, findOneAndUpdate Ä‘Æ°á»£c xÃ¢y dá»±ng sáºµn trong thÆ° viá»‡n Mongoose. Suy nghÄ© cá»§a mÃ¬nh cÃ³ hÆ¡i khÃ¡c, mÃ¬nh sáº½ viáº¿t cÃ¡c hÃ m truy xuáº¥t dá»¯ liá»‡u táº¡i táº§ng model. MÃ¬nh tháº¥y cÃ³ 2 Ä‘iá»ƒm lá»£i chÃ­nh Ä‘á»ƒ mÃ¬nh giá»¯ cÃ¡ch viáº¿t nÃ y máº·c dÃ¹ nhÃ¬n khÃ¡ thá»«a thÃ£i vÃ  tá»‘n cÃ´ng code.</li>
</ol>
<ul>
<li>Thá»© nháº¥t, náº¿u api cá»§a Mongoose cÃ³ sá»± thay Ä‘á»•i thÃ¬ mÃ¬nh chá»‰ thay Ä‘á»•i trong táº§ng model</li>
<li>Thá»© hai, mÃ¬nh giá»›i háº¡n Ä‘Æ°á»£c nhá»¯ng method mÃ  táº§ng Business cÃ³ thá»ƒ sá»­ dá»¥ng</li>
</ul>
<ol start="3">
<li>Sá»­ dá»¥ng thÆ° viá»‡n logger thay cho console.log<br>Console.log ráº¥t quan trá»ng vÃ¬ nÃ³ cung cáº¥p thÃ´ng tin cá»§a chÆ°Æ¡ng trÃ¬nh. Console.log nhá»¯ng Ä‘iá»ƒm quan trá»ng trong chÆ°Æ¡ng trÃ¬nh vá»›i má»™t style rÃµ rÃ ng giÃºp Ã­ch ráº¥t nhiá»u trong quÃ¡ trÃ¬nh debug cÅ©ng nhÆ° phÃ¡t hiá»‡n Ä‘iá»u báº¥t thÆ°á»ng khi server hoáº¡t Ä‘á»™ng. </li>
<li>Viáº¿t unit test<br>Theo sÃ¡ch clean code, test enables all the -ilities. VÃ¬ nÃ³ cho phÃ©p chÃºng ta thay Ä‘á»•i, chá»‰nh sá»­a code. Má»™t ngÃ y nÃ o Ä‘Ã³ báº¡n tháº¥y coding style ráº¥t lÃ  xáº¥u vÃ  báº¡n muá»‘n refactor, hoáº·c má»™t tÃ­nh nÄƒng nÃ o Ä‘Ã³ trong chÆ°Æ¡ng trÃ¬nh cáº§n pháº£i cáº­p nháº­t theo yÃªu cáº§u má»›i. Náº¿u báº¡n cÃ³ sáºµn cÃ¡c test thÃ¬ viá»‡c thay Ä‘á»•i code sáº½ khÃ´ng lÃ m báº¡n lo láº¯ng xem nÃ³ cÃ³ áº£nh hÆ°á»Ÿng tá»›i nhá»¯ng pháº§n khÃ¡c cá»§a chÆ°Æ¡ng trÃ¬nh hay khÃ´ng. Chá»‰ cáº§n vÆ°á»£t qua cÃ¡c test lÃ  xong ğŸ˜Š.  </li>
<li>Cáº¥u trÃºc api<br>Náº¿u mÃ¬nh sá»­ dá»¥ng cÃ¡c api viáº¿t trong file user.route vá»›i prefix /users thÃ¬ trong file nÃ y thay vÃ¬ pháº£i viáº¿t /users/id mÃ¬nh chá»‰ cáº§n viáº¿t /id. Äiá»u nÃ y cho phÃ©p mÃ¬nh cÃ³ má»™t cáº¥u trÃºc api nhiá»u táº§ng (nhiá»u /) vÃ  trÃ¡nh sá»± láº·p láº¡i khÃ´ng cáº§n thiáº¿t.</li>
</ol>
<h2 id="Chiem-nghiem"><a href="#Chiem-nghiem" class="headerlink" title="ChiÃªm nghiá»‡m"></a>ChiÃªm nghiá»‡m</h2><p>LÃ½ do mÃ¬nh viáº¿t bÃ i nÃ y lÃ  vÃ¬ má»™t cÃ¢u nÃ³i cá»§a chÃº Nguyá»…n Há»¯u ThÃ¡i HÃ²a trong má»™t video mÃ¬nh coi trÃªn youtube. â€œHá»c thÃ¬ há»c ráº¥t nhiá»u nhÆ°ng mÃ  ngá»™ (wisdom) ra Ä‘Æ°á»£c cÃ¡i gÃ¬ má»›i lÃ  quan trá»ngâ€. MÃ¬nh viáº¿t bÃ i nÃ y Ä‘á»ƒ Ä‘Ã³ng gÃ³i láº¡i 2 nÄƒm sá»­ dá»¥ng NodeJS, tá»« giai Ä‘oáº¡n tiáº¿p cáº­n, tá»›i nhá»¯ng ráº¯c rá»‘i cho Ä‘áº¿n viá»‡c cáº­p nháº­t kiáº¿n thá»©c má»›i Ä‘á»ƒ sá»­ dá»¥ng cÃ´ng nghá»‡ nÃ y â€œchuáº©nâ€ hÆ¡n. Cáº§n pháº£i nÃ³i má»™t Ä‘iá»u, giai Ä‘oáº¡n 2 vÃ  3 á»Ÿ bÃªn trÃªn diá»…n ra tuáº§n hoÃ n chá»› khÃ´ng tuáº§n tá»±. Khi mÃ¬nh suy nghÄ© tá»›i nhá»¯ng cÃ´ng nghá»‡ khÃ¡c mÃ¬nh sá»­ dá»¥ng khi Ä‘i lÃ m : AngularJS vÃ  MongoDB, bá»—ng nhiÃªn mÃ¬nh tháº¥y cÃ³ nhá»¯ng Ä‘iá»ƒm hoÃ n toÃ n tÆ°Æ¡ng tá»± vá»›i NodeJS. MÃ¬nh cÅ©ng báº¯t Ä‘áº§u tiáº¿p cáº­n cÃ¡c cÃ´ng nghá»‡ nÃ y vá»›i sá»± há»©ng khá»Ÿi vÃ¬ chÃºng cÃ³ nhá»¯ng Ä‘iá»ƒm tá»‘t hÆ¡n so vá»›i nhá»¯ng thá»© mÃ¬nh Ä‘Ã£ sá»­ dá»¥ng trÆ°á»›c Ä‘Ã³ (JS thuáº§n vá»›i AngularJS, MySQL  vá»›i MongoDB) sau Ä‘Ã³ gáº·p ráº¯c rá»‘i trong quÃ¡ trÃ¬nh sá»­ dá»¥ng vÃ  rá»“i láº¡i cáº­p nháº­t kiáº¿n thá»©c má»›i Ä‘á»ƒ giáº£i quyáº¿t nhá»¯ng ráº¯c rá»‘i gáº·p pháº£i. MÃ¬nh rÃºt ra má»™t káº¿t luáº­n mÃ  ai cÅ©ng biáº¿t Ä‘Ã³ lÃ  viá»‡c há»c há»i, cáº­p nháº­t cÃ¡i má»›i cáº§n diá»…n ra má»™t cÃ¡ch liÃªn tá»¥c. NhÆ°ng giá», vá»›i nhá»¯ng gÃ¬ mÃ¬nh Ä‘Ã£ tráº£i qua, mÃ¬nh Ä‘Ã£ hiá»ƒu sÃ¢u sáº¯c lÃ½ do cá»§a viá»‡c Ä‘Ã³. Náº¿u chÃºng ta khÃ´ng cáº­p nháº­t cÃ¡i má»›i thÃ¬ sá»›m muá»™n chÃºng ta sáº½ â€œgáº·p ráº¯c rá»‘iâ€.<br>Tháº¿ cÃ¡i nÃ y mÃ  Ä‘em vÃ o chuyá»‡n hÃ´n nhÃ¢n gia Ä‘Ã¬nh thÃ¬ sao nhá»‰ ? :D. CÃ¡c báº¡n tá»± cÃ³ cÃ¢u tráº£ lá»i há»£p lÃ½ nhÃ© :v.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/03/2namnodejs/" data-id="ck4llw8ym0000pcuqc8271m4k" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NodeJS/" rel="tag">NodeJS</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/IT/">IT</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/IT/Backend/">Backend</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IT/DevOps/">DevOps</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI-CD/" rel="tag">CI/CD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NodeJS/" rel="tag">NodeJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH/" rel="tag">SSH</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CI-CD/" style="font-size: 10px;">CI/CD</a> <a href="/tags/NodeJS/" style="font-size: 10px;">NodeJS</a> <a href="/tags/SSH/" style="font-size: 10px;">SSH</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/12/21/SSHKienthuccobanvaungdung/">SSH - Kiáº¿n thá»©c cÄƒn báº£n vÃ  á»©ng dá»¥ng</a>
          </li>
        
          <li>
            <a href="/2019/11/03/2namnodejs/">TÃ³m táº¯t 2 nÄƒm sá»­ dá»¥ng NodeJS</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 DINH Dang Khoa<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>